<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.seoulauction.renewal.mapper.kt.MypageMapper">	
	
	<!-- 아카데미 list -->
	<select id="selectAcademyList" resultType="Map">
		SELECT A.CUST_NAME , 
		A.EMAIL , 
		A.HP, 
		B.REG_DT , 
		C.ACADEMY_PAY, 
		C.ACADEMY_PAY1,
		C.ACADEMY_PAY2,
		C.ACADEMY_PAY3,
		COLUMN_JSON(C.TITLE_BLOB) TITLE_JSON,
		C.ACADEMY_NO
		FROM CUST A , ACADEMY_REQ B , ACADEMY C
		WHERE A.CUST_NO = B.CUST_NO AND B.ACADEMY_NO = C.ACADEMY_NO AND A.CUST_NO = '80722' AND B.DEL_YN = 'N'
		order by B.REG_DT desc;
	</select>
	
	<select id="selectAcademyCnt" resultType="int">
		SELECT 
		COUNT(*)	     ROW_CNT
		FROM CUST A , ACADEMY_REQ B , ACADEMY C
		WHERE A.CUST_NO = B.CUST_NO AND B.ACADEMY_NO = C.ACADEMY_NO AND A.CUST_NO = #{cust_no} AND B.DEL_YN = 'N'
	</select>
	
	<!-- 아카데미 결제정보 -->
	<select id="selectAcademyPayInfo" resultType="CommonMap">
	select 		
		ACADEMY_PAY , 
		ACADEMY_PAY1 ,
		ACADEMY_PAY2 ,
		ACADEMY_PAY3 
	from
		ACADEMY 
		where ACADEMY_NO = #{academy_no}
	</select>
	
</mapper>